(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);a(47);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),o=a(26),l=a(6),i=a(17),u=a(1),m=a.n(u),d=a(5),p=a(7),E=a(8),h=a(10),v=a(9),f=a(11),D=a(19),b=a(3),S=a.n(b);function g(e){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.indexedDB||(console.log("No browser memory available. Please update your web browser."),e(null));var a,n,r,c,s=window.indexedDB.open("CompletionistDatabase",1);s.onupgradeneeded=function(){a=s.result,r=a.createObjectStore("CompletionistStore",{keyPath:"blobName"})},s.onerror=function(t){console.log("There was an error opening the database: ".concat(t.target.errorCode)),e(!1)},s.onsuccess=function(){a=s.result,n=a.transaction("CompletionistStore","readwrite"),r=n.objectStore("CompletionistStore"),a.onerror=function(t){console.log("DB error: ".concat(t.target.errorCode)),e(!1)};var o=r.get(t);o.onsuccess=function(){var e=o.result;c=e},n.oncomplete=function(){a.close(),e(c)}}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return new Promise(function(a){window.indexedDB||(console.log("No browser memory available. Please update your web browser."),a());var n,r,c,s=window.indexedDB.open("CompletionistDatabase",1);s.onupgradeneeded=function(r){n=r.target.result,c=n.createObjectStore("CompletionistStore",{keyPath:"blobName"}),n.createIndex(e,e,{unique:!0}),c.transaction.oncomplete=function(){n.transaction("CompletionistStore","readwrite").objectStore("CompletionistStore").add({blobName:e,data:t}),n.close(),a()}},s.onerror=function(e){console.log("There was an error opening the database: ".concat(e.target.errorCode)),a()},s.onsuccess=function(){n=s.result,r=n.transaction("CompletionistStore","readwrite"),c=r.objectStore("CompletionistStore"),n.onerror=function(e){console.log("DB error: ".concat(e.target.errorCode))};var o={blobName:e,data:t};c.put(o),r.oncomplete=function(){n.close(),a()}}})}window.indexedDB||(window.indexedDB=window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);var w={CATEGORY:{0:"Unobtainable",1:"Head",2:"Shoulder",3:"Back",4:"Chest",5:"Shirt",6:"Tabard",7:"Wrist",8:"Hands",9:"Waist",10:"Legs",11:"Feet",12:"Wands",13:"One-Handed Axes",14:"One-Handed Swords",15:"One-Handed Maces",16:"Daggers",17:"Fist Weapons",18:"Shields",19:"Held In Off-hand",20:"Two-Handed Axes",21:"Two-Handed Swords",22:"Two-Handed Maces",23:"Staves",24:"Polearms",25:"Bows",26:"Guns",27:"Crossbows",28:"Warglaives",29:"Legion Artifacts"},INVENTORY_TYPE:{1:"INVTYPE_NON_EQUIP",2:"INVTYPE_HEAD",3:"INVTYPE_NECK",4:"INVTYPE_SHOULDER",5:"INVTYPE_BODY",6:"INVTYPE_CHEST",7:"INVTYPE_WAIST",8:"INVTYPE_LEGS",9:"INVTYPE_FEET",10:"INVTYPE_WRIST",11:"INVTYPE_HAND",12:"INVTYPE_FINGER",13:"INVTYPE_TRINKET",14:"INVTYPE_WEAPON",15:"INVTYPE_SHIELD",16:"INVTYPE_RANGED",17:"INVTYPE_CLOAK",18:"INVTYPE_2HWEAPON",19:"INVTYPE_BAG",20:"INVTYPE_TABARD",21:"INVTYPE_ROBE",22:"INVTYPE_WEAPONMAINHAND",23:"INVTYPE_WEAPONOFFHAND",24:"INVTYPE_HOLDABLE",25:"INVTYPE_AMMO",26:"INVTYPE_THROWN",27:"INVTYPE_RANGEDRIGHT",28:"INVTYPE_QUIVER",29:"INVTYPE_RELIC"},MOD_ID:{0:"",1:"Normal",2:"Heroic",3:"Mythic",4:"Raid Finder/Elite (PvP)"},ITEM_QUALITY:{0:"Poor",1:"Common",2:"Uncommon",3:"Rare",4:"Epic",5:"Legendary",6:"Artifact",7:"Heirloom",8:"WoW Token"},TRANSMOG_SOURCE:{1:"Boss Drop",2:"Quest",3:"Vendor",4:"World Drop",5:"Achievement",6:"Profession"},RACE_ID:{1:"Human",2:"Orc",3:"Dwarf",4:"Night Elf",5:"Undead",6:"Tauren",7:"Gnome",8:"Troll",9:"Goblin",10:"Blood Elf",11:"Draenei",12:"Fel Orc",13:"Naga",14:"Broken",15:"Skeleton",16:"Vrykul",17:"Tuskarr",18:"Forest Troll",19:"Taunka",20:"Northrend Skeleton",21:"Ice Troll",22:"Worgen",23:"Gilnean",24:"Pandaren",25:"Pandaren",26:"Pandaren",27:"Nightborne",28:"Highmountain Tauren",29:"Void Elf",30:"Lightforged Draenei",31:"Zandalari Troll",32:"Kul Tiran",33:"Human",34:"Dark Iron Dwarf",35:"Vulpera",36:"Mag'har Orc",37:"Mechagnome"},CLASS_ID:{1:"Warrior",2:"Paladin",3:"Hunter",4:"Rogue",5:"Priest",6:"Death Knight",7:"Shaman",8:"Mage",9:"Warlock",10:"Monk",11:"Druid",12:"Demon Hunter"},MOG_SLOTS:["1","2","4","7","8","9","10","11"],SET_GROUPS:["Warlock","Mage","Priest","Rogue","Druid","Demon Hunter","Hunter","Shaman","Warrior","Paladin","Death Knight","Cloth","Leather","Mail","Plate"]},T={SITE_BACKEND:"https://completionist.herokuapp.com"},O=(a(74),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).rawDataFieldHandler=function(e){a.setState({input:e.target.value})},a.state={input:""},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"addDataClick",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.input,a=this.props,n=a.loadUserCollection,r=a.userData,c=t.replace(/['"]+/g,"").split(":"),s=c.filter(function(e){return""!==e}).map(function(e){return parseInt(e,10)}),r.collected=s,n(r),I("userData",r),e.prev=7,e.next=10,S.a.post("".concat(T.SITE_BACKEND,"/collected/").concat(r.userId),s);case 10:this.setState({input:""}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.log("Axios error saving collected"),console.log(e.t0);case 17:case"end":return e.stop()}},e,this,[[7,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.input;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Tracking your collected transmog on this website requires the use of the Completionist addon, which can be installed through the",r.a.createElement("a",{href:"https://www.curseforge.com/twitch-client",rel:"noopener noreferrer",target:"_blank",className:"basic-link"},"Twitch Desktop App.")),r.a.createElement("p",null,'Once you have installed the Completionist addon, log in and type "/comp transmog". The game might freeze for a moment. A window will pop up displaying a list of numbers. Use Ctrl-C to copy, then paste it all in the window over there ----\x3e')),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"rawInput"},"Input:",r.a.createElement("textarea",{id:"rawInput",className:"form-control",rows:"5",placeholder:"Paste Data Here",onChange:this.rawDataFieldHandler,value:t})),r.a.createElement("button",{type:"button",onClick:function(){return e.addDataClick()},className:"add-data-button"},"Add Data"))))}}]),t}(n.Component)),y=Object(l.b)(function(e){return{userData:e.userData}},function(e){return{loadUserCollection:function(t){return e({type:"ADD_USER_DATA",data:t})}}})(O),x=(a(75),function(e,t){var a=t.achievementPoints-e.achievementPoints;if(0!==a)return a;var n=t.level-e.level;return 0!==n?n:t.lastModified-e.lastModified}),A=Object(l.b)(function(e){return{transmogSetList:e.transmogSetList,userCharacterData:e.userCharacterData,userData:e.userData}})(function(e){var t,a=e.userData;return a&&a.characterData&&(t=a.characterData.sort(x).slice(0,10).map(function(e){return r.a.createElement("tr",{key:Math.random().toString(36).replace(/[^a-z]+/g,"")},r.a.createElement("th",{scope:"col"},e.name),r.a.createElement("td",null,e.realm),r.a.createElement("td",null,w.CLASS_ID[e.class]),r.a.createElement("td",null,w.RACE_ID[e.race]),r.a.createElement("td",null,e.level),r.a.createElement("td",null,e.achievementPoints),r.a.createElement("td",null,r.a.createElement("img",{src:"https://render-us.worldofwarcraft.com/character/".concat(e.thumbnail),alt:"Toon Avatar"})),r.a.createElement("td",null,function(e){var t=new Date(e),a=Intl.DateTimeFormat().resolvedOptions().timeZone;return t.toLocaleString("en-US",{timeZone:a})}(e.lastModified)))})),r.a.createElement("div",{className:"container User"},r.a.createElement("div",{className:"User-title"},r.a.createElement("h1",null,"User Page")),r.a.createElement(y,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Toon Roster"),r.a.createElement("table",{className:"table table-dark"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Realm"),r.a.createElement("th",{scope:"col"},"Class"),r.a.createElement("th",{scope:"col"},"Race"),r.a.createElement("th",{scope:"col"},"Level"),r.a.createElement("th",{scope:"col"},"Points"),r.a.createElement("th",{scope:"col"},"Thumb"),r.a.createElement("th",{scope:"col"},"Last Played"))),r.a.createElement("tbody",null,t))))}),k=(a(76),function(){return console.log("-- TODO: create Main page --"),r.a.createElement("div",{className:"container Main"},r.a.createElement("h1",null,"Main Page"))}),C=a(20),_=a(43),j=a.n(_),M=(a(89),function(e){var t=e.visualMetaForSlot,a=e.categoryID,n=e.navigateToVisualEdit,c=e.removeVisualFromSet,s=e.showEditButtons,o=e.showEmptySlots,l=e.emptyClick,i=e.tabIndex;if(!t||!t.visualID)return r.a.createElement("div",{className:"row",style:o?{display:"block"}:{display:"none"}},r.a.createElement("div",{className:"col-12",role:"button",onClick:function(){return l()},onKeyPress:function(){},tabIndex:i},"".concat(w.CATEGORY[a],":")));var u=function(e){console.log("Key pressed: '".concat(e.key,"'"))},m=t.isCollected?" collected":"",d="";return t&&t.sources&&(d=r.a.createElement(j.a,{id:"visual".concat(t.visualID),place:"right",type:"dark",effect:"float"},t.sources.map(function(e){var t=e.isCollected?"collected":"";return r.a.createElement("div",{key:e.sourceID,className:t},"".concat(e.name,"(").concat(e.itemID,")"))}))),r.a.createElement("div",{"data-tip":!0,"data-for":"visual".concat(t.visualID),className:"item-row"},d,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},"".concat(w.CATEGORY[a],":")),r.a.createElement("div",{className:m},t.name),r.a.createElement("div",{style:s?{display:"block"}:{display:"none"}},r.a.createElement("button",{type:"button",className:"invisible-button",onClick:function(){return n(t.visualID)},onKeyPress:u},r.a.createElement("span",{role:"img",className:"rename-appearance","aria-label":"change appearance name"},"\xa0\u2943")),r.a.createElement("button",{type:"button",className:"invisible-button",onClick:function(){return c(t.visualID)},onKeyPress:u},r.a.createElement("span",{role:"img",className:"rename-appearance","aria-label":"change appearance name"},"\xa0\u2297")))))});M.defaultProps={visualMetaForSlot:null,tabIndex:null,showEditButtons:!0,showEmptySlots:!0};var H=M,L=(a(90),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).newSetNameFieldHandler=function(e){a.setState({newSetNameText:e.target.value})},a.newSetExpansionFieldHandler=function(e){a.setState({newSetExpansionText:e.target.value})},a.newSetGroupFieldHandler=function(e){a.setState({newSetGroupText:e.target.value})},a.newSetClick=Object(d.a)(m.a.mark(function e(){var t,n,r,c,s,o,l,i,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.addTransmogSet,r=t.history,c=a.state,s=c.newSetNameText,o=c.newSetGroupText,l=c.newSetExpansionText,i={name:s,group:o,expansion:l},e.next=5,a.saveSet(i);case 5:(u=e.sent).setId&&(i.setId=u.setId,n(i),a.setState({newSetNameText:""}),r.push("/set/edit/".concat(i.setId)));case 7:case"end":return e.stop()}},e)})),a.saveSet=function(){var e=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("".concat(T.SITE_BACKEND,"/set"),{data:t});case 3:return a=e.sent,console.log("--\x3e result.data :",JSON.stringify(a.data,null,2)),e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log("Axios Error saving set"),console.log(e.t0),e.abrupt("return",{});case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),a.byCreationDate=function(e,t){var a=new Date(e.createdAt);return new Date(t.createdAt)-a},a.state={newSetNameText:"",newSetGroupText:"",newSetExpansionText:""},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.transmogSetList,n=t.visualMetaHash,c=t.history,s=this.state,o=s.newSetExpansionText,l=s.newSetNameText,i=s.newSetGroupText,u=Object(C.a)(a),m="";return u&&(u.sort(this.byCreationDate),m=r.a.createElement("div",{className:"data-table"},r.a.createElement("table",{className:"table table-hover table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"d-flex"},r.a.createElement("th",{className:"col-1"},"Ex."),r.a.createElement("th",{className:"col-3"},"Group"),r.a.createElement("th",{className:"col-3"},"Name"),r.a.createElement("th",{className:"col"},"Items"))),r.a.createElement("tbody",null,u.map(function(e){var t;return t=w.MOG_SLOTS.map(function(t){var a=e[t],c=n[a];return c?(c.visualID=a,a||(a=Math.floor(1e4*Math.random())),r.a.createElement("div",{key:a},r.a.createElement(H,{visualMetaForSlot:c,categoryID:t,fetchNameForItem:function(){},navigateToVisualEdit:function(){},removeVisualFromSet:function(){},showEditButtons:!1,showEmptySlots:!1,emptyClick:function(){}}))):""}),r.a.createElement("tr",{key:e.setId,className:e.isCollected?"d-flex green":"d-flex",onClick:function(){return c.push("/set/edit/".concat(e.setId))}},r.a.createElement("td",{className:"col-1"},e.expansion),r.a.createElement("td",{className:"col-3"},e.group),r.a.createElement("td",{className:"col-3"},e.name),r.a.createElement("td",{className:"col"},t))}))))),r.a.createElement("div",{className:"CreateSets"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-1"},r.a.createElement("label",{className:"formLabel",htmlFor:"newSetExpansion"},"Patch:",r.a.createElement("input",{id:"newSetExpansion",className:"form-control",placeholder:"0.0",onChange:this.newSetExpansionFieldHandler,value:o}))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"formLabel",htmlFor:"newSetGroup"},"Class:",r.a.createElement("div",{id:"newSetGroup"},r.a.createElement("select",{className:"form-control",value:i,onChange:this.newSetGroupFieldHandler},w.SET_GROUPS.map(function(e,t){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"formLabel",htmlFor:"newSetName"},"Set Name:",r.a.createElement("input",{id:"newSetName",className:"form-control",placeholder:"Example: Warmongering Gladiator's Plate",onChange:this.newSetNameFieldHandler,value:l}))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"submit",className:"add-set-button",onClick:function(){return e.newSetClick()}},"New Set")))),r.a.createElement("div",{className:"outputField"},m))}}]),t}(n.Component)),P=Object(l.b)(function(e){return{transmogSetList:e.transmogSetList,visualMetaHash:e.visualMetaHash}},function(e){return{addTransmogSet:function(t){return e({type:"ADD_TRANSMOG_SET",data:t})}}})(Object(D.f)(L)),V=a(4),R=(a(92),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).searchFieldHandler=function(e){a.setState({filterString:e.target.value})},a.setSelected=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,c,s,o,l,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.state.selectedSlot,c=a.state.setId,s=a.props.addVisualToSet,"slot"!==t){e.next=7;break}a.setState({selectedSlot:n}),e.next=17;break;case 7:if("visual"!==t||!r){e.next=17;break}return o=n.sourceID,l=n.visualID,e.next=11,S.a.post("".concat(T.SITE_BACKEND,"/set/").concat(c),{visualID:l,slot:r});case 11:return i=e.sent,console.log("--\x3e adding visual ID ".concat(l," to slot ").concat(r,". Result :"),i),e.next=15,a.updateVisualMetaName(o,l);case 15:s(c,r,o),a.setState({selectedSlot:null});case 17:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.updateVisualMetaName=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,c,s,o,l,i,u,d;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,c=r.sourceIDHash,s=r.visualMetaHash,o=r.updateVisualMetaData,l=c[t].name,e.prev=2,(i=Object(V.a)({},s[n])).name=l,delete i.sources,e.next=8,S.a.post("".concat(T.SITE_BACKEND,"/visuals/").concat(n),i);case 8:u=e.sent,console.log("--\x3e axios visualMeta update result :",u),(d=s[n]).name=l,o([d]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("Error updating visualMeta for visualID:".concat(n));case 18:case"end":return e.stop()}},e,null,[[2,15]])}));return function(t,a){return e.apply(this,arguments)}}(),a.setNameHandler=function(e){a.setState({newName:e.target.value})},a.startRename=function(){var e=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("keydown",a.keyDownHandler),a.setState({renamingSet:!0,newName:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renameSet=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.removeEventListener("keydown",a.keyDownHandler),n=a.props.updateSetName,""!==(r=a.state.newName)){e.next=6;break}return e.abrupt("return");case 6:return c=a.state.setId,e.next=9,S.a.post("".concat(T.SITE_BACKEND,"/set/").concat(c),{name:r});case 9:s=e.sent,console.log("--\x3e Renaming set to ".concat(r,". Result :"),s),n(c,r),a.setState({renamingSet:!1});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.keyDownHandler=function(e){var t=a.state.renamingSet;"Escape"===e.key&&t&&a.setState({renamingSet:!1})},a.removeVisualFromSet=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.setId,c=a.props.removeVisualFromSet,e.prev=2,e.next=5,S.a.delete("".concat(T.SITE_BACKEND,"/set/").concat(r,"/slot/").concat(t,"/visual/").concat(n));case 5:c(r,t,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("--\x3e remove visual from set error :",e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleKeyPress=function(){},a.state={filterString:"",selectedSlot:null,setId:null,renamingSet:!1,newName:""},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match;this.state.setId!==e.params.setId&&this.setState({setId:e.params.setId})}},{key:"render",value:function(){var e=this,t=this.state,a=t.setId,n=t.filterString,c=t.selectedSlot,s=t.renamingSet,o=t.newName,l=this.props,i=l.transmogSetList,u=l.visualMetaHash,m=l.history,d=l.sourceList,p="";if(a&&i&&i.length>0){var E,h,v=i.find(function(e){return e.setId===a});if(E=w.MOG_SLOTS.map(function(t){var a=v[t],n=u[a];return n&&(n.visualID=a),r.a.createElement("div",{className:c===t?"selected":"",key:Math.random().toString(36).replace(/[^a-z]+/g,"")},r.a.createElement(H,{visualMetaForSlot:n,categoryID:t,tabIndex:t,navigateToVisualEdit:function(e){return m.push("/visual/edit/".concat(e))},removeVisualFromSet:function(a){return e.removeVisualFromSet(t,a)},emptyClick:function(){return e.setSelected("slot",t)}}))}),s)h=r.a.createElement("form",{className:"filters form-group",onSubmit:function(t){return e.renameSet(t)}},"Set Name:",r.a.createElement("input",{id:"filterString",className:"form-control",placeholder:"Type new set name here",onChange:this.setNameHandler,value:o,autoComplete:"off"}),r.a.createElement("button",{className:"hidden",type:"submit","aria-label":"submit"}));else{var f="Set Name: ".concat(v.name);h=r.a.createElement("div",{onClick:function(){return e.startRename(v.name)},onKeyPress:this.handleKeyPress,role:"button",tabIndex:"0"},f)}p=r.a.createElement("div",{className:"setPanel"},r.a.createElement("div",{className:"panelRow"},r.a.createElement("div",{className:"panelData"},h),r.a.createElement("div",{className:"panelData"},"Group: ".concat(v.group)),r.a.createElement("div",{className:"panelData"},"Patch: ".concat(v.expansion))),r.a.createElement("div",{className:"panelRow"},r.a.createElement("div",{className:"panelData"},"Items: ",E)))}var D="";return c&&(D=r.a.createElement("table",{className:"table table-hover table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Item ID"))),r.a.createElement("tbody",null,d.filter(function(e){return e.name&&Number(e.categoryID)===Number(c)&&!u[e.visualID].isAssigned&&(e.name.toLowerCase().includes(n.toLowerCase())||e.itemID.toString().includes(n))}).sort(function(e,t){return t.itemID-e.itemID}).map(function(t){var a="";return t.isCollected&&(a+="collected"),r.a.createElement("tr",{key:t.sourceID,onClick:function(){return e.setSelected("visual",t)},className:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.itemID),r.a.createElement("td",null,t.isCollected?"\u2705":""))}).slice(0,100)))),r.a.createElement("div",{className:"EditSets"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:"data-table"},p)),r.a.createElement("div",{className:"col-5"},r.a.createElement("div",{className:"filters form-group"},r.a.createElement("input",{id:"filterString",className:"form-control",placeholder:"Type item name here to start filtering...",onChange:this.searchFieldHandler,value:n,autoComplete:"off"})),r.a.createElement("div",{className:"data-table"},D)))))}}]),t}(n.Component)),B=Object(l.b)(function(e){return{transmogSetList:e.transmogSetList,sourceList:e.sourceList,sourceIDHash:e.sourceIDHash,visualMetaHash:e.visualMetaHash}},function(e){return{addVisualToSet:function(t,a,n){return e({type:"ADD_VISUAL_TO_SET",data:{changingSet:t,slot:a,sourceID:n}})},updateSetName:function(t,a){return e({type:"RENAME_TRANSMOG_SET",data:{changingSet:t,newName:a}})},removeVisualFromSet:function(t,a,n){return e({type:"REMOVE_VISUAL_FROM_SET",data:{changingSet:t,slot:a,visualID:n}})},updateVisualMetaData:function(t){return e({type:"UPDATE_VISUAL_META_DATA",data:t})}}})(Object(D.f)(R)),F=(a(93),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).updateVisualMetaName=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,c,s,o,l,i,u,d,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.visualID,r=a.props,c=r.sourceIDHash,s=r.visualMetaHash,o=r.updateVisualMetaData,l=r.history,i=c[t].name,e.prev=3,(u=Object(V.a)({},s[n])).name=i,delete u.sources,e.next=9,S.a.post("".concat(T.SITE_BACKEND,"/visuals/").concat(n),u);case 9:d=e.sent,console.log("--\x3e axios visualMeta update result :",d),(p=s[n]).name=i,o([p]),l.goBack(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log("Error updating visualMeta for visualID:".concat(n));case 20:case"end":return e.stop()}},e,null,[[3,17]])}));return function(t){return e.apply(this,arguments)}}(),a.state={visualID:null},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params&&e.params.visualID&&this.setState({visualID:e.params.visualID})}},{key:"render",value:function(){var e=this,t=this.state.visualID,a=this.props.visualMetaHash,n="",c="";if(a&&a[t]){var s=a[t],o=Array.isArray(s.sources)?s.sources:[];n=r.a.createElement("div",{className:"visual-meta"},r.a.createElement("div",{className:"visual-name"},s.name),r.a.createElement("div",{className:"instructions"},"Click an item to promote it to primary name.")),c=r.a.createElement("table",{className:"table table-hover table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Item ID"))),r.a.createElement("tbody",null,o.map(function(t){return r.a.createElement("tr",{key:t.sourceID,onClick:function(){return e.updateVisualMetaName(t.sourceID)}},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.itemID))})))}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"visual-panel col-7"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},n),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"data-table"},c)))))}}]),t}(n.Component)),U=Object(l.b)(function(e){return{sourceIDHash:e.sourceIDHash,visualMetaHash:e.visualMetaHash,userData:e.userData}},function(e){return{updateVisualMetaData:function(t){return e({type:"UPDATE_VISUAL_META_DATA",data:t})}}})(Object(D.f)(F)),G=(a(94),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).rawDataFieldHandler=function(e){a.setState({input:e.target.value})},a.addSearchStringHandler=function(e){a.setState({filterString:e.target.value})},a.saveData=function(){var e=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("".concat(T.SITE_BACKEND,"/import"),{data:t});case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Axios Error"),console.log(e.t0),console.log(e.t0.config);case 10:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),a.filterByName=function(e,t){return t.filter(function(t){return t&&t.name&&(""===e||t.name.toLowerCase().includes(e.toLowerCase()))}).sort(function(e,t){return t.sourceID-e.sourceID}).slice(0,50)},a.state={input:"",filterString:""},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"addDataClick",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.input,a=this.props.addScrapedData,e.prev=2,n=JSON.parse(t),e.next=6,this.saveData(n);case 6:a(n),this.setState({input:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.input,n=t.filterString,c=this.props.sourceList,s=this.filterByName(n,c),o="";return c.length>0&&(o=r.a.createElement("div",{className:"data-table"},r.a.createElement("table",{className:"table table-hover table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"sourceID"),r.a.createElement("th",{scope:"col"},"itemID"),r.a.createElement("th",{scope:"col"},"name"),r.a.createElement("th",{scope:"col"},"invType"),r.a.createElement("th",{scope:"col"},"visualID"),r.a.createElement("th",{scope:"col"},"quality"),r.a.createElement("th",{scope:"col"},"itemModID"),r.a.createElement("th",{scope:"col"},"categoryID"),r.a.createElement("th",{scope:"col"},"sourceType"))),r.a.createElement("tbody",null,s.map(function(e){return r.a.createElement("tr",{className:e.isCollected?"green":"",key:e.sourceID},r.a.createElement("th",{scope:"row"},e.sourceID),r.a.createElement("td",null,e.itemID),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.invType),r.a.createElement("td",null,e.visualID),r.a.createElement("td",null,e.quality),r.a.createElement("td",null,e.itemModID),r.a.createElement("td",null,e.categoryID),r.a.createElement("td",null,e.sourceType))}))))),r.a.createElement("div",{className:"Scraper"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"rawInput"},"Input:",r.a.createElement("textarea",{id:"rawInput",className:"form-control",rows:"5",placeholder:"Paste Data Here",onChange:this.rawDataFieldHandler,value:a}))),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{type:"button",onClick:function(){return e.addDataClick()}},"Add Data")),r.a.createElement("div",{className:"filters form-group"},r.a.createElement("label",{htmlFor:"filterString"},"Search:",r.a.createElement("input",{id:"filterString",className:"form-control",placeholder:"search for...",onChange:this.addSearchStringHandler,value:n,autoComplete:"off"}))),r.a.createElement("div",{className:"outputField"},o))}}]),t}(n.Component)),Y=Object(l.b)(function(e){return{sourceList:e.sourceList,userData:e.userData}},function(e){return{addScrapedData:function(t){return e({type:"ADD_SOURCE_DATA",data:t})}}})(G),K=a(45),W=a.n(K),z=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n,r,c,s,o,l,i,u,d,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.updateAppState,n=t.updateUserCollection,r=t.history,c=t.location,s=W.a.parse(c.search),o={},l=s.access_token,i=s.id,u=s.battletag,o.battleNetToken=l,o.userId=i,o.battleTag=decodeURIComponent(u),e.prev=7,"https://us.api.blizzard.com/wow/user/characters",e.next=11,S()({url:"https://us.api.blizzard.com/wow/user/characters",params:{access_token:l}});case 11:d=e.sent,a("userCharacterData",d.data.characters),o.characterData=d.data.characters,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log("--\x3e bnet request err :",e.t0);case 19:return S.a.defaults.headers.common.id=i,S.a.defaults.headers.common.authorization="Bearer ".concat(l),e.prev=21,e.next=24,S()({url:"".concat(T.SITE_BACKEND,"/user/").concat(i)});case 24:(p=e.sent).data&&(o.collected=p.data.collected,o.role=p.data.role),a("userData",o),I("userData",o),n(o.collected),o.collected?r.push("/"):r.push("/user"),e.next=36;break;case 32:e.prev=32,e.t1=e.catch(21),console.log("--\x3e user data request err :",e.t1),r.push("/");case 36:case"end":return e.stop()}},e,this,[[7,16],[21,32]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Battlenet Login Successful"),r.a.createElement("p",null,"Retrieving account info..."))}}]),t}(n.Component),q=Object(l.b)(function(e){return{userData:e.userData}},function(e){return{updateUserCollection:function(t){return e({type:"ADD_USER_DATA",data:t})},updateAppState:function(t,a){return e({type:"ADD_STATE",data:{key:t,value:a}})}}})(Object(D.f)(z)),J=(a(106),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n,r,c,s,o,l,i,u,d,p,E;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.transmogSetList,n=t.loadSetData,r=t.updateVisualMetaData,c=t.sourceList,s=t.addSourceData,o=t.updateAppState,l=t.visualMetaHash,e.next=3,g("userData");case 3:if((i=e.sent)&&(S.a.defaults.headers.common.id=i.data.userId,o("userData",i.data)),a&&0!==a.length){e.next=22;break}return e.next=8,g("sets");case 8:return(u=e.sent)&&(console.log("-- set list loaded from memory --"),n(u.data)),e.prev=10,e.next=13,S.a.get("".concat(T.SITE_BACKEND,"/sets"));case 13:I("sets",(u=e.sent).data),console.log("-- Axios: set list updated --"),n(u.data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log("Error fetching set list: ".concat(e.t0));case 22:if(l&&0!==Object.keys(l).length){e.next=41;break}return e.next=25,g("visuals");case 25:return(p=e.sent)&&(console.log("-- DB: visuals loaded --"),r(p.data),d=p.data,console.log("--\x3e visualsList :",d)),e.prev=27,e.next=30,S.a.get("".concat(T.SITE_BACKEND,"/visuals"));case 30:p=e.sent,console.log("-- Axios: visuals updated --"),I("visuals",p.data),r(p.data),d=p.data,console.log("--\x3e visualsList :",d),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(27),console.log("Error fetching visual meta data: ".concat(e.t1));case 41:if(c&&0!==Object.keys(c).length){e.next=57;break}return e.next=44,g("sourceList");case 44:return(E=e.sent)&&E.data&&(console.log("-- DB: sources loaded --"),s(E.data)),e.prev=46,e.next=49,S.a.get("".concat(T.SITE_BACKEND,"/sources"));case 49:E=e.sent,console.log("-- Axios: sources updated --"),E&&E.data&&(I("sourceList",E.data),s(E.data)),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(46),console.log("Error fetching full item list: ".concat(e.t2));case 57:case"end":return e.stop()}},e,this,[[10,19],[27,38],[46,54]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.userData,t=r.a.createElement("li",null,r.a.createElement(i.b,{to:"/login",exact:!0,activeClassName:"battle-net-login-button"},"Login using Battle.Net"));e&&e.battleTag&&(t=r.a.createElement("li",null,r.a.createElement(i.b,{to:"/user",exact:!0,className:"logged-in-button"},"Logged in as ".concat(e.battleTag))));var a="admin"===e.role?{}:{display:"none"},n="admin"===e.role||"write"===e.role?{}:{display:"none"};return r.a.createElement("div",{className:"Navigator"},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"/",exact:!0,activeClassName:"my-active-link"},"Main")),r.a.createElement("li",{style:n},r.a.createElement(i.b,{to:"/set/new",exact:!0,activeClassName:"my-active-link"},"Create Sets")),r.a.createElement("li",{style:a},r.a.createElement(i.b,{to:"/scraper",exact:!0,activeClassName:"my-active-link"},"Scraper")),t))),r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/",component:k}),r.a.createElement(D.a,{exact:!0,path:"/user",component:A}),r.a.createElement(D.a,{exact:!0,path:"/set/new",component:P}),r.a.createElement(D.a,{exact:!0,path:"/set/edit/:setId",component:B}),r.a.createElement(D.a,{exact:!0,path:"/visual/edit/:visualID",component:U}),r.a.createElement(D.a,{exact:!0,path:"/scraper",component:Y}),r.a.createElement(D.a,{exact:!0,path:"/login",render:function(){window.location="".concat(T.SITE_BACKEND,"/login")}}),r.a.createElement(D.a,{exact:!0,path:"/login_success",render:function(e){return r.a.createElement(q,e)}})))}}]),t}(n.Component));J.defaultProps={history:{}};var Q=Object(l.b)(function(e){return{sourceList:e.sourceList,transmogSetList:e.transmogSetList,visualMetaHash:e.visualMetaHash,userData:e.userData}},function(e){return{loadSetData:function(t){return e({type:"LOAD_TRANSMOG_SETS",data:t})},updateVisualMetaData:function(t){return e({type:"UPDATE_VISUAL_META_DATA",data:t})},addSourceData:function(t){return e({type:"ADD_SOURCE_DATA",data:t})},updateAppState:function(t,a){return e({type:"ADD_STATE",data:{key:t,value:a}})}}})(J);var Z=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $={sourceList:[],sourceIDHash:{},transmogSetList:[],visualMetaHash:{},userData:{characterData:[],collected:[]},userCharacterData:[],battleNetToken:null},X=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Object(V.a)({},t);return e.forEach(function(e){var t=e.visualID;if(t){if(n[t])if(n[t].sources){n[t].sources.find(function(t){return t.sourceID===e.sourceID})||(n[t].sources.push(e),n[t].sources.sort(function(e,t){return t.name>(e.name||"")?1:-1}))}else n[t].sources=[e];else n[t]={sources:[e]};!n[t].name&&e.name&&(n[t].name=e.name),!n[t].categoryID&&e.categoryID&&(n[t].categoryID=e.categoryID),!n[t].isHideVisual&&e.isHideVisual&&(n[t].isHideVisual=e.isHideVisual),a.includes(e.sourceID)&&(n[t].isCollected=!0)}}),n},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SOURCE_DATA":var a=Object(V.a)({},e.sourceIDHash),n=e.userData.collected;t.data.forEach(function(e){a[e.sourceID]=e}),n.forEach(function(e){a[e]&&(a[e].isCollected=!0)});var r=Object.values(a),c=X(r,e.visualMetaHash,n);return Object(V.a)({},e,{sourceList:r,sourceIDHash:a,visualMetaHash:c});case"ADD_USER_DATA":var s=Object(V.a)({},e.sourceIDHash),o=Object(V.a)({},e.userData,t.data);console.log("--\x3e ADD_USER_DATA workingUserData :",o),o.collected.forEach(function(e){s[e]&&(s[e].isCollected=!0)});var l=X(e.sourceList,e.visualMetaHash,o.collected);return Object(V.a)({},e,{visualMetaHash:l,userData:o,sourceIDHash:s});case"UPDATE_VISUAL_META_DATA":var i=Object(V.a)({},e.visualMetaHash);return t.data.forEach(function(e){var t=Object(V.a)({},i[e.visualID],e);i[e.visualID]=t}),Object(V.a)({},e,{visualMetaHash:i});case"ADD_TRANSMOG_SET":var u=[t.data].concat(Object(C.a)(e.transmogSetList));return Object(V.a)({},e,{transmogSetList:u});case"LOAD_TRANSMOG_SETS":var m=Object(V.a)({},e.visualMetaHash),d=e.transmogSetList,p=t.data,E={};d.forEach(function(e){E[e.setId]=e}),p.forEach(function(e){E[e.setId]=e,Object.values(w.MOG_SLOTS).forEach(function(t){var a=e[t];m[a]||(m[a]={}),m[a].isAssigned=!0})});var h=Object.values(E);return Object(V.a)({},e,{visualMetaHash:m,transmogSetList:h});case"ADD_VISUAL_TO_SET":var v=Object(C.a)(e.transmogSetList),f=Object(V.a)({},e.visualMetaHash),D=t.data,b=D.changingSet,S=D.slot,g=D.sourceID,N=e.sourceIDHash[g],I=N.visualID,T=N.name,O=v.findIndex(function(e){return e.setId===b});return v[O][S]=I,f[I].name=T,f[I].isAssigned=!0,Object(V.a)({},e,{transmogSetList:v,visualMetaHash:f});case"RENAME_TRANSMOG_SET":var y=Object(C.a)(e.transmogSetList),x=t.data,A=x.changingSet,k=x.newName,_=y.findIndex(function(e){return e.setId===A});return y[_].name=k,Object(V.a)({},e,{transmogSetList:y});case"REMOVE_VISUAL_FROM_SET":var j=Object(C.a)(e.transmogSetList),M=Object(V.a)({},e.visualMetaHash),H=t.data,L=H.changingSet,P=H.slot,R=H.visualID,B=j.findIndex(function(e){return e.setId===L});return j[B][P]=null,M[R].isAssigned=!1,Object(V.a)({},e,{visualMetaHash:M,transmogSetList:j});case"ADD_STATE":var F=Object(V.a)({},e);return F[t.data.key]=t.data.value,F;default:return e}},te=Object(o.b)(ee);s.a.render(r.a.createElement(l.a,{store:te},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},46:function(e,t,a){e.exports=a(107)},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){}},[[46,1,2]]]);
//# sourceMappingURL=main.f11c2440.chunk.js.map